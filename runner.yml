apiVersion: actions.github.com/v1alpha1
kind: AutoScalingRunnerSet
metadata:
  name: copilot-agent-runners          # reference this in runs-on:
  namespace: actions-runner-system
spec:
  githubConfigUrl: https://github.com/isNotOkay/self-hosted-github-copilot-agent-runner
  githubConfigSecret: arc-ghapp-secret                # <-- name of your GitHub App secret
  maxRunners: 10                                      # upper bound; adjust as needed
  minRunners: 0                                       # 0 is typical for autoscaling
  template:
    spec:
      image: ghcr.io/YOUR_ORG/YOUR_RUNNER_IMAGE:TAG   # <-- your custom image
      ephemeral: true
      labels:                                         # optional extra labels
        - copilot-agent
        - arc-runner
      env:
        - name: GITHUB_HOST
          value: github.com
        - name: GITHUB_SERVER_URL
          value: https://github.com/
        - name: GITHUB_API_URL
          value: https://api.github.com/
